"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7642],{7642:(st,w,d)=>{d.r(w),d.d(w,{JobsModule:()=>rt});var b=d(177),F=d(8160),e=d(4438),O=d(1626),v=d(6354),g=d(9437),y=d(8810),$=d(7673),R=function(n){return n[n.None=0]="None",n[n.Created=1]="Created",n[n.Washing=2]="Washing",n[n.Washed=3]="Washed",n[n.Repairing=4]="Repairing",n[n.Repaired=5]="Repaired",n[n.Programming=6]="Programming",n[n.Programmed=7]="Programmed",n[n.Calibrating=8]="Calibrating",n[n.Calibrated=9]="Calibrated",n[n.Labeling=10]="Labeling",n[n.Labeled=11]="Labeled",n[n.FieldTest=12]="FieldTest",n[n.FieldTested=13]="FieldTested",n[n.CableMeasurement_Lux=14]="CableMeasurement_Lux",n[n.CableMeasurement_Lux_Done=15]="CableMeasurement_Lux_Done",n[n.EngraveLamps=16]="EngraveLamps",n[n.QCChecking=17]="QCChecking",n[n.QCChecked=18]="QCChecked",n[n.SendQuoting=19]="SendQuoting",n[n.Completed=20]="Completed",n}(R||{});class J{constructor(){this.rsNumber="",this.mineId="",this.mine=[],this.dateCreated=new Date,this.dateStart=new Date,this.dateEnd=new Date,this.rfq="",this.technitionID="",this.isRepair=!1,this.isUpgrade=!1,this.is12Volt=!1,this.jobStatus=R.Created,this.jobLamps=[],this.jobStatuses=[],this.technician=void 0,this.technicianID=void 0}}var f=d(5312),j=function(n){return n[n.reparing=0]="reparing",n[n.repeaired=1]="repeaired",n}(j||{});class N{constructor(){this.jobLampStatus=j.reparing,this.jobItems=[]}}var B=d(9747);let S=(()=>{var n;class l{constructor(i,t){this.http=i,this.spinnerService=t,this.navNumber=0,this.jobSelected=void 0,this.jobs=[],this.mines=[],this.newLampItems=[],this.selectedJobLamp=new N,this.httpOptions={headers:new O.Lr({"Content-Type":"application/json"})}}getJobs(){return this.spinnerService.showSpinner(),this.http.get(f.c.apiURL+"/u_Job_liteC").pipe((0,v.T)(i=>(this.jobs.length=0,this.jobs=i,this.spinnerService.hideSpinner(),i)),(0,g.W)(this.handleError("getJobs",[])))}getJobByID(i){return this.spinnerService.showSpinner(),this.http.get(f.c.apiURL+"/u_Job_liteC/"+i).pipe((0,v.T)(t=>(this.jobSelected=t,this.spinnerService.hideSpinner(),t)),(0,g.W)(this.handleError("getJobs",new J)))}getCompleted(){return this.spinnerService.showSpinner(),this.http.get(f.c.apiURL+"/u_Job_liteC/completed").pipe((0,v.T)(i=>(this.jobs.length=0,this.jobs=i,this.spinnerService.hideSpinner(),i)),(0,g.W)(this.handleError("getJobs",[])))}getMines(){return this.http.get(f.c.apiURL+"/Mine/GetMines").pipe((0,v.T)(i=>(this.mines.length=0,this.mines=i,i)),(0,g.W)(this.handleError("getMines",[])))}addJob(i){return this.http.post(`${f.c.apiURL}/u_Job_liteC`,i,this.httpOptions).pipe((0,v.T)(t=>t),(0,g.W)(t=>409===t.status?(console.error("Job conflict detected:",t),(0,y.$)(()=>new Error("A job with the same details already exists."))):this.handleError("addJob")(t)))}updateJob(i){return this.http.put(f.c.apiURL+"/u_Job_liteC/"+i.jobID,i,this.httpOptions).pipe((0,v.T)(t=>t),(0,g.W)(this.handleError("updateJob")))}removeJob(i){return this.spinnerService.showSpinner(),this.http.delete(f.c.apiURL+"/u_Job_liteC/"+i,this.httpOptions).pipe((0,v.T)(t=>{var r;this.spinnerService.hideSpinner();let s=null===(r=this.jobs)||void 0===r?void 0:r.findIndex(c=>c.jobID===t);return null!=s&&this.jobs.splice(s,1),t}),(0,g.W)(this.handleError("updateJob")))}updateJobStatus(i,t){return this.http.put(f.c.apiURL+"/u_Job_liteC/"+t+"/JobStatus",i,this.httpOptions).pipe((0,v.T)(r=>r),(0,g.W)(this.handleError("updateJob")))}addJobLamps(i,t){return this.spinnerService.showSpinner(),this.http.post(f.c.apiURL+"/u_Job_liteC/"+i+"/lamps",t,this.httpOptions).pipe((0,v.T)(r=>{this.spinnerService.hideSpinner(),console.log(r),this.jobSelected=r;let s=this.jobs.find(c=>c.jobID===i);return s&&(s=r),r}),(0,g.W)(this.handleError("updateJob")))}removeJobLamp(i){return this.spinnerService.showSpinner(),this.http.delete(f.c.apiURL+"/u_Job_liteC/"+i+"/lamps",this.httpOptions).pipe((0,v.T)(t=>{if(this.spinnerService.hideSpinner(),1==t){var r,s;let c=null===(r=this.jobSelected)||void 0===r||null===(r=r.jobLamps)||void 0===r?void 0:r.findIndex(m=>m.itemLampID===i);console.log(c),null!=c&&(null===(s=this.jobSelected)||void 0===s||null===(s=s.jobLamps)||void 0===s||s.splice(c,1))}return t}),(0,g.W)(this.handleError("updateJob")))}updateJobLampStatus(i){return this.spinnerService.showSpinner(),this.http.put(f.c.apiURL+"/u_Job_liteC/JobLampItems",i,this.httpOptions).pipe((0,v.T)(t=>(this.spinnerService.hideSpinner(),t)),(0,g.W)(this.handleError("updateJob")))}updateJobLamp(i,t){return this.spinnerService.showSpinner(),this.http.patch(f.c.apiURL+"/u_Job_liteC/JobLampItems/"+t,i,this.httpOptions).pipe((0,v.T)(r=>(this.spinnerService.hideSpinner(),r)),(0,g.W)(this.handleError("updateJob")))}updateJobLampHead(i){return this.spinnerService.showSpinner(),this.http.patch(f.c.apiURL+"/u_Job_liteC/JobLampItems",i,this.httpOptions).pipe((0,v.T)(t=>(this.spinnerService.hideSpinner(),t)),(0,g.W)(t=>(this.spinnerService.hideSpinner(),console.error("Error in updateJobLampHead:",t),(0,y.$)(()=>t))))}handleError(i="operation",t){return r=>(console.error(r),this.spinnerService.hideSpinner(),(0,$.of)(t))}moveForward(){this.navNumber++}moveBackward(){this.navNumber--}}return(n=l).\u0275fac=function(i){return new(i||n)(e.KVO(O.Qq),e.KVO(B.D))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),l})();var a=d(7863),E=d(4870),p=d(4341),u=d(467);let X=(()=>{var n;class l{transform(i,...t){return i?new Date(i).toLocaleString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):""}}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275pipe=e.EJ8({name:"readableDate",type:n,pure:!0}),l})();function Y(n,l){if(1&n){const o=e.RV6();e.j41(0,"ion-icon",12),e.bIt("click",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.setOpen(t,!0))}),e.k0s()}}let A=(()=>{var n;class l{constructor(i,t,r){this.jobService=i,this.toastController=t,this.router=r,this.job=new J,this.currentJob=0,this.isAlertOpen=!1,this.alertButtons=[{text:"Cancel",role:"cancel",handler:s=>{this.setOpen(s,!1)}},{text:"OK",role:"confirm",handler:()=>{this.removeItem()}}]}ngOnInit(){}editItemClick(i,t){var r,s;i.stopPropagation(),this.jobService.jobSelected=t,this.jobService.getJobByID(null!==(r=null===(s=this.jobService.jobSelected)||void 0===s?void 0:s.jobID)&&void 0!==r?r:"").subscribe(c=>{this.jobService.moveForward()},c=>{})}setOpen(i,t){i.stopPropagation(),this.isAlertOpen=t}removeItem(){this.jobService.removeJob(this.job.jobID).subscribe(i=>{null!=i?this.presentToast("Removed item.","success"):this.presentToast("Error removing item.","error")},i=>{this.presentToast("Error removing item.","error")})}presentToast(i,t){var r=this;return(0,u.A)(function*(){yield(yield r.toastController.create({message:i,duration:2e3,position:"bottom",cssClass:t})).present()})()}itemClick(i){this.jobService.jobSelected=this.job,this.router.navigate(["jobsPage/jobProgress"])}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(a.K_),e.rXU(F.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobItem"]],inputs:{job:"job",currentJob:"currentJob"},decls:32,vars:9,consts:[[1,"itemContainer",3,"click"],[2,"padding","0px !important"],["size","6",2,"font-size","18px","text-align","left"],["size","4",2,"font-size","18px","text-align","left"],["size","2",2,"font-size","18px","text-align","right"],["name","trash","size","large","style","color: var(--ion-color-danger);",3,"click",4,"ngIf"],["size","12",2,"font-size","18px","text-align","left"],[1,"ion-padding-top"],["size","12",1,"ion-text-center"],["expand","block","color","primary","size","large",3,"click"],["name","create","slot","start"],["header","Remove Item","message","Are you sure that you want to remove?",3,"didDismiss","isOpen","buttons"],["name","trash","size","large",2,"color","var(--ion-color-danger)",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"div",0),e.bIt("click",function(s){return t.itemClick(s)}),e.j41(1,"ion-grid",1)(2,"ion-row")(3,"ion-col",2)(4,"strong"),e.EFF(5,"RS Number: "),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"ion-col",3)(8,"strong"),e.EFF(9,"RFQ: "),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"ion-col",4),e.DNE(12,Y,1,0,"ion-icon",5),e.k0s()()(),e.j41(13,"ion-grid",1)(14,"ion-row")(15,"ion-col",6)(16,"strong"),e.EFF(17,"Date Created:"),e.k0s(),e.EFF(18),e.nI1(19,"readableDate"),e.k0s()()(),e.j41(20,"ion-grid",1)(21,"ion-row")(22,"ion-col",6)(23,"strong"),e.EFF(24,"Technician:"),e.k0s(),e.EFF(25),e.k0s()()(),e.j41(26,"ion-row",7)(27,"ion-col",8)(28,"ion-button",9),e.bIt("click",function(s){return t.editItemClick(s,t.job)}),e.nrm(29,"ion-icon",10),e.EFF(30," Edit Job "),e.k0s()()()(),e.j41(31,"ion-alert",11),e.bIt("didDismiss",function(s){return t.setOpen(s,!1)}),e.k0s()),2&i&&(e.R7$(6),e.SpI(" ",t.job.rsNumber," "),e.R7$(4),e.SpI(" ",t.job.rfq," "),e.R7$(2),e.Y8G("ngIf",0===t.currentJob),e.R7$(6),e.SpI(" ",e.bMT(19,7,t.job.dateCreated)," "),e.R7$(7),e.SpI(" ",null==t.job.technician?null:t.job.technician.name," "),e.R7$(6),e.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons))},dependencies:[b.bT,a.Zy,a.Jm,a.hU,a.lO,a.iq,a.ln,X],styles:[".itemContainer[_ngcontent-%COMP%]{margin-bottom:8px;padding:5px;background-color:#add8e6;color:#000;border:1px;border-radius:10px;border-color:#00f;border-style:solid}ion-col[_ngcontent-%COMP%]{padding:0}ion-row[_ngcontent-%COMP%]{padding:0!important}"]}),l})();function V(n,l){if(1&n&&(e.j41(0,"ion-select-option",6),e.EFF(1),e.k0s()),2&n){const o=l.$implicit;e.Y8G("value",o.technicianID),e.R7$(),e.SpI(" ",o.name," ")}}function U(n,l){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-jobItem",7),e.k0s()),2&n){const o=l.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("currentJob",i.currentJob)("job",o)}}function z(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"form")(2,"ion-item")(3,"ion-label"),e.EFF(4,"Technicians"),e.k0s(),e.j41(5,"ion-select",3),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.selectedTechnicianID,t)||(r.selectedTechnicianID=t),e.Njj(t)}),e.bIt("ionChange",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.onTechnicianChange(t))}),e.DNE(6,V,2,2,"ion-select-option",4),e.k0s()(),e.nrm(7,"br"),e.DNE(8,U,2,2,"div",5),e.k0s()()}if(2&n){const o=e.XpG();e.R7$(5),e.R50("ngModel",o.selectedTechnicianID),e.R7$(),e.Y8G("ngForOf",o.techService.technicians),e.R7$(2),e.Y8G("ngForOf",o.jobListFilter)}}let q=(()=>{var n;class l{constructor(i,t,r){this.jobService=i,this.router=t,this.techService=r,this.isVisible=!1,this.currentJob=0,this.itemStatus=0,this.jobList=[],this.jobListFilter=[],this.techService.getItems().subscribe()}ngAfterViewInit(){}ngOnChanges(i){i.isVisible&&(this.isVisible?(console.log("app-jobList is now visible"),this.initZone()):console.log("app-jobList is now hidden"))}ngOnInit(){this.initZone()}initZone(){const i=localStorage.getItem("selectedTechnicianID");i?this.selectedTechnicianID=i:this.jobListFilter=this.jobList,0===this.currentJob?(this.jobService.getJobs().subscribe(t=>{var r;this.filterJobsByTechnician(null!==(r=this.selectedTechnicianID)&&void 0!==r?r:"")}),this.jobService.getMines().subscribe(t=>{})):this.jobService.getCompleted().subscribe(t=>{this.jobList=this.jobService.jobs,this.jobListFilter=this.jobService.jobs})}addClick(){this.jobService.jobSelected=void 0,this.jobService.moveForward()}onTechnicianChange(i){console.log("Selected Technician ID:",this.selectedTechnicianID),this.selectedTechnicianID?(localStorage.setItem("selectedTechnicianID",this.selectedTechnicianID),this.filterJobsByTechnician(this.selectedTechnicianID)):(localStorage.removeItem("selectedTechnicianID"),this.jobListFilter=this.jobList)}filterJobsByTechnician(i){this.jobListFilter="ALL"==i?this.jobService.jobs:this.jobService.jobs.filter(t=>t.technicianID===i)}onSubmit(i){}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(F.Ix),e.rXU(E.O))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobList"]],inputs:{isVisible:"isVisible",currentJob:"currentJob"},features:[e.OA$],decls:5,vars:1,consts:[["shape","round",3,"click"],["slot","icon-only","name","add"],[4,"ngIf"],["name","technicianID","interface","alert",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"value"],[3,"currentJob","job"]],template:function(i,t){1&i&&(e.j41(0,"ion-button",0),e.bIt("click",function(){return t.addClick()}),e.nrm(1,"ion-icon",1),e.k0s(),e.nrm(2,"br")(3,"br"),e.DNE(4,z,9,3,"div",2)),2&i&&(e.R7$(4),e.Y8G("ngIf",0==t.itemStatus))},dependencies:[b.Sq,b.bT,p.qT,p.BC,p.cb,p.vS,p.cV,a.Jm,a.iq,a.uz,a.he,a.Nm,a.Ip,a.Je,A]}),l})();function H(n,l){if(1&n&&(e.j41(0,"ion-select-option",7),e.EFF(1),e.k0s()),2&n){const o=l.$implicit;e.Y8G("value",o.technicianID),e.R7$(),e.SpI(" ",o.name," ")}}function W(n,l){1&n&&(e.j41(0,"div",8),e.EFF(1," \u26a0\ufe0f Please select a technician before continuing. "),e.k0s())}let Q=(()=>{var n;class l{constructor(i,t,r){var s,c,m;this.modalController=i,this.jobService=t,this.techService=r,this.headPieceNumber="",this.serialNumber="",this.technicianID="",this.showTechError=!1,this.headPieceNumber=null!==(s=this.jobService.selectedJobLamp.headPieceNumber)&&void 0!==s?s:"",this.serialNumber=null!==(c=this.jobService.selectedJobLamp.serialNumber)&&void 0!==c?c:"",this.technicianID=null!==(m=this.jobService.selectedJobLamp.technicianID)&&void 0!==m?m:""}accept(){this.technicianID&&""!==this.technicianID.trim()?(this.showTechError=!1,this.modalController.dismiss({accepted:!0,serialNumber:this.serialNumber,headPieceNumber:this.headPieceNumber,technicianID:this.technicianID})):this.showTechError=!0}dismiss(){this.modalController.dismiss({accepted:!1})}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(a.W3),e.rXU(S),e.rXU(E.O))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-lampHeadpieceModal"]],decls:25,vars:5,consts:[["position","stacked"],[3,"ngModelChange","ngModel"],["interface","alert",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","error-text ion-padding-start ion-padding-top",4,"ngIf"],["expand","full",3,"click"],["expand","full","color","light",3,"click"],[3,"value"],[1,"error-text","ion-padding-start","ion-padding-top"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Enter Details"),e.k0s()()(),e.j41(4,"ion-content"),e.nrm(5,"br"),e.j41(6,"ion-item")(7,"ion-label",0),e.EFF(8,"Serial Number"),e.k0s(),e.j41(9,"ion-input",1),e.mxI("ngModelChange",function(s){return e.DH7(t.serialNumber,s)||(t.serialNumber=s),s}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label",0),e.EFF(12,"HeadPiece"),e.k0s(),e.j41(13,"ion-input",1),e.mxI("ngModelChange",function(s){return e.DH7(t.headPieceNumber,s)||(t.headPieceNumber=s),s}),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label"),e.EFF(16,"Technician"),e.k0s(),e.j41(17,"ion-select",2),e.mxI("ngModelChange",function(s){return e.DH7(t.technicianID,s)||(t.technicianID=s),s}),e.DNE(18,H,2,2,"ion-select-option",3),e.k0s()(),e.DNE(19,W,2,0,"div",4),e.k0s(),e.j41(20,"ion-footer")(21,"ion-button",5),e.bIt("click",function(){return t.accept()}),e.EFF(22,"Accept"),e.k0s(),e.j41(23,"ion-button",6),e.bIt("click",function(){return t.dismiss()}),e.EFF(24,"Cancel"),e.k0s()()),2&i&&(e.R7$(9),e.R50("ngModel",t.serialNumber),e.R7$(4),e.R50("ngModel",t.headPieceNumber),e.R7$(4),e.R50("ngModel",t.technicianID),e.R7$(),e.Y8G("ngForOf",t.techService.technicians),e.R7$(),e.Y8G("ngIf",t.showTechError))},dependencies:[b.Sq,b.bT,p.BC,p.vS,a.Jm,a.W9,a.M0,a.eU,a.$w,a.uz,a.he,a.Nm,a.Ip,a.BC,a.ai,a.Je,a.Gw],styles:[".error-text[_ngcontent-%COMP%]{color:red;font-size:14px;font-weight:500}"]}),l})();const Z=n=>({"green-background":n});let M=(()=>{var n;class l{constructor(i,t,r,s){this.toastController=i,this.jobService=t,this.modalController=r,this.techService=s,this.lamp=void 0,this.newLamp=!1,this.isAlertOpen=!1,this.JobLampStatus=j,this.alertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.setOpen(!1)}},{text:"OK",role:"confirm",handler:()=>{this.removeItem()}}]}ngOnInit(){}openSerialNumberModal(){var i=this;return(0,u.A)(function*(){var t;i.jobService.selectedJobLamp=null!==(t=i.lamp)&&void 0!==t?t:new N;const r=yield i.modalController.create({component:Q});r.onDidDismiss().then(s=>{if(s.data&&s.data.accepted){if(i.lamp){var c,m,C,x,k,I,L;let T=JSON.parse(JSON.stringify(i.lamp)),_=JSON.parse(JSON.stringify(i.lamp));if(_.headPieceNumber=null!==(c=s.data.headPieceNumber)&&void 0!==c?c:"",_.serialNumber=null!==(m=s.data.serialNumber)&&void 0!==m?m:"",_.technicianID=null!==(C=s.data.technicianID)&&void 0!==C?C:"",!i.checkLampHeadpiece(null!==(x=_.headPieceNumber)&&void 0!==x?x:"")&&i.newLamp)return i.lamp=T,void i.presentToast("Duplicate serial or headpiece","error");i.lamp.headPieceNumber=null!==(k=s.data.headPieceNumber)&&void 0!==k?k:"",i.lamp.serialNumber=null!==(I=s.data.serialNumber)&&void 0!==I?I:"",i.lamp.technicianID=null!==(L=s.data.technicianID)&&void 0!==L?L:"",i.newLamp||i.jobService.updateJobLampHead(i.lamp).subscribe(D=>{},D=>{i.lamp=T,i.presentToast("Duplicate serial or headpiece","error")})}console.log("Serial Number:",s.data.serialNumber)}}),yield r.present()})()}getTechName(i){return this.techService.getTechnicianName(i)}checkLamps(i){var t;let r=null===(t=this.jobService.jobSelected)||void 0===t||null===(t=t.jobLamps)||void 0===t?void 0:t.findIndex(c=>c.serialNumber==i),s=this.jobService.newLampItems.findIndex(c=>c.serialNumber==i);return-1==r&&-1==s}checkLampHeadpiece(i){if(""!=i){var t;let r=null===(t=this.jobService.jobSelected)||void 0===t||null===(t=t.jobLamps)||void 0===t?void 0:t.findIndex(c=>c.headPieceNumber==i),s=this.jobService.newLampItems.findIndex(c=>c.headPieceNumber==i);return console.log(r),console.log(s),console.log(i),-1==r&&-1==s}return!0}editItemClick(){}removeItem(){if(this.newLamp){let t=this.jobService.newLampItems.findIndex(r=>{var s;return r.serialNumber==(null===(s=this.lamp)||void 0===s?void 0:s.serialNumber)});this.jobService.newLampItems.splice(t,1)}else{var i;this.jobService.removeJobLamp(null===(i=this.lamp)||void 0===i?void 0:i.itemLampID).subscribe(t=>{this.presentToast("Lamp Removed","success")},t=>{this.presentToast("Error removing Lamp","error")})}}setOpen(i){this.isAlertOpen=i}presentToast(i,t){var r=this;return(0,u.A)(function*(){yield(yield r.toastController.create({message:i,duration:2e3,position:"bottom",cssClass:t})).present()})()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(a.K_),e.rXU(S),e.rXU(a.W3),e.rXU(E.O))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-lampItem"]],inputs:{lamp:"lamp",newLamp:"newLamp"},decls:19,vars:8,consts:[[1,"itemContainer",3,"ngClass"],[2,"padding","0px !important"],[3,"click"],["size","10",2,"font-size","18px","text-align","left"],["size","2",2,"font-size","18px","text-align","right"],[2,"font-size","18px","text-align","left",3,"click"],["name","trash","size","large"],["header","Remove Item","message","Are you sure that you want to remove ?",3,"didDismiss","isOpen","buttons"]],template:function(i,t){if(1&i&&(e.j41(0,"div",0)(1,"ion-grid",1)(2,"ion-row",2),e.bIt("click",function(){return t.openSerialNumberModal()}),e.j41(3,"ion-col",3)(4,"strong"),e.EFF(5,"Serial Number: "),e.k0s(),e.EFF(6),e.j41(7,"strong"),e.EFF(8,"Head Piece: "),e.k0s(),e.EFF(9),e.j41(10,"strong"),e.EFF(11,"Technician: "),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"ion-col",4)(14,"ion-grid",1)(15,"ion-row")(16,"ion-col",5),e.bIt("click",function(s){return t.setOpen(!0),s.stopPropagation()}),e.nrm(17,"ion-icon",6),e.k0s()()()()()()(),e.j41(18,"ion-alert",7),e.bIt("didDismiss",function(){return t.setOpen(!1)}),e.k0s()),2&i){let r;e.Y8G("ngClass",e.eq3(6,Z,(null==t.lamp?null:t.lamp.jobLampStatus)==t.JobLampStatus.repeaired)),e.R7$(6),e.SpI(" ",null==t.lamp?null:t.lamp.serialNumber," "),e.R7$(3),e.SpI(" ",null==t.lamp?null:t.lamp.headPieceNumber," "),e.R7$(3),e.SpI(" ",t.getTechName(null!==(r=null==t.lamp?null:t.lamp.technicianID)&&void 0!==r?r:"")," "),e.R7$(6),e.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons)}},dependencies:[b.YU,a.Zy,a.hU,a.lO,a.iq,a.ln],styles:[".itemContainer[_ngcontent-%COMP%]{margin-bottom:8px;padding:5px;background-color:#add8e6;color:#000;border:1px;border-radius:10px;border-color:#00f;border-style:solid}ion-col[_ngcontent-%COMP%]{padding:0}ion-row[_ngcontent-%COMP%]{padding:0!important}.green-background[_ngcontent-%COMP%]{background-color:green}"]}),l})();function K(n,l){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-lampItem",5),e.k0s()),2&n){const o=l.$implicit;e.R7$(),e.Y8G("lamp",o)}}function ee(n,l){if(1&n&&(e.j41(0,"div")(1,"div",3),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.DNE(4,K,2,1,"div",4),e.k0s()),2&n){const o=e.XpG();e.R7$(2),e.SpI("COUNT : ",null==o.jobService.jobSelected||null==o.jobService.jobSelected.jobLamps?null:o.jobService.jobSelected.jobLamps.length,""),e.R7$(2),e.Y8G("ngForOf",null==o.jobService.jobSelected?null:o.jobService.jobSelected.jobLamps)}}let te=(()=>{var n;class l{constructor(i,t){this.jobService=i,this.router=t,this.itemStatus=0}ngOnInit(){console.log(this.jobService.jobSelected)}addClick(){this.jobService.moveForward()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(F.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-lampList"]],decls:5,vars:1,consts:[["shape","round",3,"click"],["slot","icon-only","name","add"],[4,"ngIf"],[2,"font-size","2rem"],[4,"ngFor","ngForOf"],[3,"lamp"]],template:function(i,t){1&i&&(e.j41(0,"ion-button",0),e.bIt("click",function(){return t.addClick()}),e.nrm(1,"ion-icon",1),e.k0s(),e.nrm(2,"br")(3,"br"),e.DNE(4,ee,5,2,"div",2)),2&i&&(e.R7$(4),e.Y8G("ngIf",0==t.itemStatus))},dependencies:[b.Sq,b.bT,a.Jm,a.iq,M]}),l})();function ie(n,l){if(1&n&&(e.j41(0,"ion-select-option",11),e.EFF(1),e.k0s()),2&n){const o=l.$implicit;e.Y8G("value",o.mineId),e.R7$(),e.SpI(" ",o.name," ")}}function ne(n,l){if(1&n&&(e.j41(0,"ion-select-option",11),e.EFF(1),e.k0s()),2&n){const o=l.$implicit;e.Y8G("value",o.technicianID),e.R7$(),e.SpI(" ",o.name," ")}}function oe(n,l){if(1&n&&(e.j41(0,"ion-button",12),e.EFF(1," Submit"),e.k0s()),2&n){const o=e.XpG(2);e.Y8G("disabled",o.itemForm.invalid)}}function re(n,l){if(1&n&&(e.j41(0,"ion-button",12),e.EFF(1," Update"),e.k0s()),2&n){const o=e.XpG(2);e.Y8G("disabled",o.itemForm.invalid)}}function se(n,l){if(1&n){const o=e.RV6();e.j41(0,"form",2),e.bIt("ngSubmit",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.onSubmit(t))}),e.j41(1,"ion-item"),e.nrm(2,"ion-input",3),e.k0s(),e.j41(3,"ion-item"),e.nrm(4,"ion-input",4),e.k0s(),e.j41(5,"ion-item")(6,"ion-label"),e.EFF(7,"Mine"),e.k0s(),e.j41(8,"ion-select",5),e.DNE(9,ie,2,2,"ion-select-option",6),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label"),e.EFF(12,"Technicians"),e.k0s(),e.j41(13,"ion-select",7),e.DNE(14,ne,2,2,"ion-select-option",6),e.k0s()(),e.j41(15,"ion-item")(16,"ion-label"),e.EFF(17," Upgrade "),e.k0s(),e.nrm(18,"ion-checkbox",8),e.k0s(),e.j41(19,"ion-item")(20,"ion-label"),e.EFF(21," Repair "),e.k0s(),e.nrm(22,"ion-checkbox",9),e.k0s(),e.nrm(23,"br"),e.DNE(24,oe,2,1,"ion-button",10)(25,re,2,1,"ion-button",10),e.k0s()}if(2&n){const o=e.XpG();e.Y8G("formGroup",o.itemForm),e.R7$(9),e.Y8G("ngForOf",o.jobService.mines),e.R7$(5),e.Y8G("ngForOf",o.techService.technicians),e.R7$(10),e.Y8G("ngIf",null==o.jobService.jobSelected),e.R7$(),e.Y8G("ngIf",null!=o.jobService.jobSelected)}}function ae(n,l){if(1&n&&(e.j41(0,"ion-select-option",11),e.EFF(1),e.k0s()),2&n){const o=l.$implicit;e.Y8G("value",o.mineId),e.R7$(),e.SpI(" ",o.name," ")}}function le(n,l){if(1&n&&(e.j41(0,"ion-select-option",11),e.EFF(1),e.k0s()),2&n){const o=l.$implicit;e.Y8G("value",o.technicianID),e.R7$(),e.SpI(" ",o.name," ")}}function ce(n,l){if(1&n&&(e.j41(0,"ion-button",12),e.EFF(1," Submit"),e.k0s()),2&n){const o=e.XpG(3);e.Y8G("disabled",o.itemForm.invalid)}}function me(n,l){if(1&n&&(e.j41(0,"ion-button",12),e.EFF(1," Update"),e.k0s()),2&n){const o=e.XpG(3);e.Y8G("disabled",o.itemForm.invalid)}}function pe(n,l){if(1&n){const o=e.RV6();e.j41(0,"form",2),e.bIt("ngSubmit",function(t){e.eBV(o);const r=e.XpG(2);return e.Njj(r.onSubmit(t))}),e.j41(1,"ion-item"),e.nrm(2,"ion-input",3),e.k0s(),e.j41(3,"ion-item"),e.nrm(4,"ion-input",4),e.k0s(),e.j41(5,"ion-item")(6,"ion-label"),e.EFF(7,"Mine"),e.k0s(),e.j41(8,"ion-select",5),e.DNE(9,ae,2,2,"ion-select-option",6),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label"),e.EFF(12,"Technicians"),e.k0s(),e.j41(13,"ion-select",7),e.DNE(14,le,2,2,"ion-select-option",6),e.k0s()(),e.j41(15,"ion-item")(16,"ion-label"),e.EFF(17," 24V "),e.k0s(),e.nrm(18,"ion-checkbox",16),e.k0s(),e.j41(19,"ion-item")(20,"ion-label"),e.EFF(21," Upgrade "),e.k0s(),e.nrm(22,"ion-checkbox",8),e.k0s(),e.j41(23,"ion-item")(24,"ion-label"),e.EFF(25," Repair "),e.k0s(),e.nrm(26,"ion-checkbox",9),e.k0s(),e.nrm(27,"br"),e.DNE(28,ce,2,1,"ion-button",10)(29,me,2,1,"ion-button",10),e.k0s()}if(2&n){const o=e.XpG(2);e.Y8G("formGroup",o.itemForm),e.R7$(9),e.Y8G("ngForOf",o.jobService.mines),e.R7$(5),e.Y8G("ngForOf",o.techService.technicians),e.R7$(14),e.Y8G("ngIf",null==o.jobService.jobSelected),e.R7$(),e.Y8G("ngIf",null!=o.jobService.jobSelected)}}function de(n,l){1&n&&(e.j41(0,"div"),e.nrm(1,"app-lampList"),e.k0s())}function be(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"h2"),e.EFF(2),e.k0s(),e.j41(3,"ion-segment",13),e.bIt("ionChange",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.segmentChanged(t))}),e.j41(4,"ion-segment-button",14)(5,"ion-label"),e.EFF(6,"General"),e.k0s()(),e.j41(7,"ion-segment-button",15)(8,"ion-label"),e.EFF(9,"Lamps"),e.k0s()()(),e.DNE(10,pe,30,5,"form",0)(11,de,2,0,"div",1),e.k0s()}if(2&n){const o=e.XpG();e.R7$(2),e.SpI(" RS NUMBER: ",o.jobService.jobSelected.rsNumber," "),e.R7$(8),e.Y8G("ngIf","general"==o.selectedSegment),e.R7$(),e.Y8G("ngIf","lamps"==o.selectedSegment)}}let ue=(()=>{var n;class l{constructor(i,t,r,s){this.fb=i,this.jobService=t,this.toastController=r,this.techService=s,this.isToastOpen=!1,this.selectedSegment="general",this.itemForm=this.fb.group(null==t.jobSelected?{rsNumber:["",p.k0.required],rfq:["",p.k0.required],mineId:["",p.k0.required],technicianID:["",p.k0.required],isRepair:[!1,p.k0.required],isUpgrade:[!1,p.k0.required],is12Volt:[!1,p.k0.required]}:{rsNumber:[t.jobSelected.rsNumber,p.k0.required],rfq:[t.jobSelected.rfq,p.k0.required],mineId:[t.jobSelected.mineId,p.k0.required],isRepair:[t.jobSelected.isRepair,p.k0.required],isUpgrade:[t.jobSelected.isUpgrade,p.k0.required],is12Volt:[t.jobSelected.is12Volt,p.k0.required],technicianID:[t.jobSelected.technicianID,p.k0.required]})}ngOnInit(){this.techService.getItems().subscribe()}segmentChanged(i){this.selectedSegment=i.detail.value}onSubmit(i){i.preventDefault(),null==this.jobService.jobSelected?this.itemForm.valid&&this.jobService.addJob({rsNumber:this.itemForm.value.rsNumber,rfq:this.itemForm.value.rfq,mineId:this.itemForm.value.mineId,isRepair:this.itemForm.value.isRepair,isUpgrade:this.itemForm.value.isUpgrade,is12Volt:this.itemForm.value.is12Volt,technicianID:this.itemForm.value.technicianID}).subscribe(r=>{null==r?this.presentToast("Error adding job.","error"):(this.presentToast("Added job.","success"),this.itemForm.reset(),this.jobService.moveBackward())},r=>{this.presentToast("Duplicate JOB Number!!.","error")}):this.itemForm.valid&&(console.log(this.jobService.jobSelected),this.jobService.updateJob({jobID:this.jobService.jobSelected.jobID,rsNumber:this.itemForm.value.rsNumber,rfq:this.itemForm.value.rfq,mineId:this.itemForm.value.mineId,isRepair:this.itemForm.value.isRepair,isUpgrade:this.itemForm.value.isUpgrade,is12Volt:this.itemForm.value.is12Volt,technicianID:this.itemForm.value.technicianID}).subscribe(r=>{null==r?this.presentToast("Error updating item.","error"):(this.presentToast("Updated item.","success"),this.itemForm.reset(),this.jobService.moveBackward())},r=>{this.presentToast("Error updating item.","error")}))}presentToast(i,t){var r=this;return(0,u.A)(function*(){yield(yield r.toastController.create({message:i,duration:1500,position:"bottom",cssClass:t})).present()})()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(p.ok),e.rXU(S),e.rXU(a.K_),e.rXU(E.O))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobForm"]],decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["labelPlacement","stacked","label","RS Number:","formControlName","rsNumber","type","text",2,"font-size","30px !important"],["labelPlacement","stacked","label","RFQ:","formControlName","rfq","type","text",2,"font-size","30px !important"],["formControlName","mineId","interface","alert"],[3,"value",4,"ngFor","ngForOf"],["formControlName","technicianID","interface","alert"],["formControlName","isUpgrade"],["formControlName","isRepair"],["expand","full","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["expand","full","type","submit",3,"disabled"],["value","general",3,"ionChange"],["value","general"],["value","lamps"],["formControlName","is12Volt"]],template:function(i,t){1&i&&e.DNE(0,se,26,5,"form",0)(1,be,12,3,"div",1),2&i&&(e.Y8G("ngIf",null==t.jobService.jobSelected),e.R7$(),e.Y8G("ngIf",null!=t.jobService.jobSelected))},dependencies:[b.Sq,b.bT,p.qT,p.BC,p.cb,a.Jm,a.eY,a.$w,a.uz,a.he,a.Gp,a.eP,a.Nm,a.Ip,a.hB,a.Je,a.Gw,p.j4,p.JD,te]}),l})();var h=d(6013),he=d(1611),G=d(554);function _e(n,l){if(1&n&&(e.j41(0,"div"),e.nrm(1,"app-lampItem",11),e.k0s()),2&n){const o=l.$implicit;e.R7$(),e.Y8G("lamp",o)("newLamp",!0)}}let ve=(()=>{var n;class l{constructor(i,t,r,s){this.dialogService=i,this.jobService=t,this.fb=r,this.toastController=s,this.barcodeFormat=h.Gi,this.lensFacing=h.Nn,this.barcodes=[],this.jobLamps=[],this.isAlertOpen=!1,this.alertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.jobService.newLampItems=[],this.isAlertOpen=!1}},{text:"OK",role:"confirm",handler:()=>{this.addLamps()}}],this.itemForm=this.fb.group({serialNumber:["",p.k0.required]})}ngOnInit(){this.jobService.newLampItems=[]}addClick(){var i=this;return(0,u.A)(function*(){yield i.startScan()})()}addToJob(){this.isAlertOpen=!0}addManualClick(){var i=this;return(0,u.A)(function*(){if(i.itemForm.valid){var t,r,s;let m=new N;var c;m.serialNumber=null===(t=i.itemForm.get("serialNumber"))||void 0===t?void 0:t.value,i.checkLamps(null!==(r=m.serialNumber)&&void 0!==r?r:"")&&i.checkLampHeadpiece(null!==(s=m.headPieceNumber)&&void 0!==s?s:"")?(i.jobService.newLampItems.push(m),null===(c=i.itemForm.controls.serialNumber)||void 0===c||c.setValue(""),i.presentToast("TPL2 added.","success")):i.presentToast("Duplicate Serial Number.","error")}})()}startScan(){var i=this;return(0,u.A)(function*(){(yield i.dialogService.showModal({component:he.m,cssClass:"barcode-scanning-modal",showBackdrop:!1,componentProps:{formats:[i.barcodeFormat.Code128],lensFacing:h.Nn.Back}})).onDidDismiss().then(r=>{var s,c;const m=null===(s=r.data)||void 0===s?void 0:s.barcode;i.barcodes=null===(c=r.data)||void 0===c?void 0:c.barcodes,i.getLamps(),m&&(i.barcodes=[m],console.log(m))})})()}checkLamps(i){var t;let r=null===(t=this.jobService.jobSelected)||void 0===t||null===(t=t.jobLamps)||void 0===t?void 0:t.findIndex(c=>c.serialNumber==i),s=this.jobService.newLampItems.findIndex(c=>c.serialNumber==i);return-1==r&&-1==s}checkLampHeadpiece(i){if(""!=i){var t;let r=null===(t=this.jobService.jobSelected)||void 0===t||null===(t=t.jobLamps)||void 0===t?void 0:t.findIndex(c=>c.headPieceNumber==i),s=this.jobService.newLampItems.findIndex(c=>c.headPieceNumber==i);return console.log(r),console.log(s),console.log(i),-1==r&&-1==s}return!0}getLamps(){var i=this;return(0,u.A)(function*(){i.barcodes.forEach(t=>{if(i.checkLamps(t.displayValue)){let r=new N;r.serialNumber=t.displayValue,i.jobService.newLampItems.push(r)}})})()}addLamps(){var i=this;return(0,u.A)(function*(){var t;i.jobService.addJobLamps(null===(t=i.jobService.jobSelected)||void 0===t?void 0:t.jobID,i.jobService.newLampItems).subscribe(r=>{console.log(r),i.presentToast("Lamps added successfully","success"),i.jobService.newLampItems=[],i.jobService.moveBackward()},r=>{i.presentToast("Error adding lamps","error")})})()}presentToast(i,t){var r=this;return(0,u.A)(function*(){yield(yield r.toastController.create({message:i,duration:1500,position:"bottom",cssClass:t})).present()})()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(G.o),e.rXU(S),e.rXU(p.ok),e.rXU(a.K_))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-lampAdd"]],decls:26,vars:6,consts:[["shape","round",3,"click"],["slot","end","name","add"],[3,"formGroup"],[1,"button-row"],["fill","solid","labelPlacement","stacked","label","Serial Number:","formControlName","serialNumber","type","text",2,"font-size","30px !important"],[2,"font-size","24px"],[1,"ion-padding",2,"height","70vh"],[4,"ngFor","ngForOf"],[2,"position","absolute","bottom","0px"],["expand","block","shape","round",2,"margin","10px",3,"click"],["header","Add TPL2 to Job","message","Are you sure you want to add these to Job?",3,"isOpen","buttons"],[3,"lamp","newLamp"]],template:function(i,t){1&i&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"ion-button",0),e.bIt("click",function(){return t.addClick()}),e.EFF(5," SCAN "),e.nrm(6,"ion-icon",1),e.k0s(),e.j41(7,"form",2)(8,"div",3),e.nrm(9,"ion-input",4),e.j41(10,"ion-button",0),e.bIt("click",function(){return t.addManualClick()}),e.EFF(11," ADD "),e.nrm(12,"ion-icon",1),e.k0s()()(),e.nrm(13,"br")(14,"br"),e.j41(15,"div",5)(16,"strong"),e.EFF(17,"COUNT:"),e.k0s(),e.EFF(18),e.k0s(),e.j41(19,"ion-content",6),e.DNE(20,_e,2,2,"div",7),e.k0s()()(),e.j41(21,"ion-footer",8)(22,"ion-toolbar")(23,"ion-button",9),e.bIt("click",function(){return t.addToJob()}),e.EFF(24," Add to JOB "),e.k0s()()(),e.nrm(25,"ion-alert",10)),2&i&&(e.R7$(3),e.SpI(" RS NUMBER: ",null==t.jobService.jobSelected?null:t.jobService.jobSelected.rsNumber," "),e.R7$(4),e.Y8G("formGroup",t.itemForm),e.R7$(11),e.SpI(" ",t.jobService.newLampItems.length,""),e.R7$(2),e.Y8G("ngForOf",t.jobService.newLampItems),e.R7$(5),e.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons))},dependencies:[b.Sq,p.qT,p.BC,p.cb,a.Zy,a.Jm,a.b_,a.I9,a.W9,a.M0,a.iq,a.$w,a.ai,a.Gw,p.j4,p.JD,M],styles:[".button-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px}"]}),l})();function ge(n,l){if(1&n&&e.nrm(0,"app-jobList",9),2&n){const o=e.XpG(3);e.Y8G("isVisible",0===o.jobService.navNumber)}}function fe(n,l){1&n&&e.nrm(0,"app-jobForm")}function je(n,l){if(1&n&&(e.j41(0,"div",7)(1,"ion-card")(2,"ion-card-content")(3,"ion-grid")(4,"ion-row")(5,"ion-col"),e.DNE(6,ge,1,1,"app-jobList",8)(7,fe,1,0,"app-jobForm",2),e.k0s()()()()()()),2&n){const o=e.XpG(2);e.R7$(6),e.Y8G("ngIf",0===o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",1==o.jobService.navNumber)}}function Ce(n,l){1&n&&e.nrm(0,"app-lampAdd",10)}function Se(n,l){if(1&n&&(e.j41(0,"div"),e.DNE(1,je,8,2,"div",5)(2,Ce,1,0,"app-lampAdd",6),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngIf",2!=o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",2==o.jobService.navNumber)}}function Ie(n,l){if(1&n&&e.nrm(0,"app-jobList",12),2&n){const o=e.XpG(3);e.Y8G("currentJob",1)("isVisible",0===o.jobService.navNumber)}}function ke(n,l){1&n&&e.nrm(0,"app-jobForm")}function Fe(n,l){if(1&n&&(e.j41(0,"div",7)(1,"ion-card")(2,"ion-card-content")(3,"ion-grid")(4,"ion-row")(5,"ion-col"),e.DNE(6,Ie,1,2,"app-jobList",11)(7,ke,1,0,"app-jobForm",2),e.k0s()()()()()()),2&n){const o=e.XpG(2);e.R7$(6),e.Y8G("ngIf",0==o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",1==o.jobService.navNumber)}}function Re(n,l){if(1&n&&(e.j41(0,"div"),e.DNE(1,Fe,8,2,"div",5),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngIf",2!=o.jobService.navNumber)}}function Le(n,l){if(1&n){const o=e.RV6();e.j41(0,"ion-segment",13),e.bIt("ionChange",function(t){e.eBV(o);const r=e.XpG();return e.Njj(r.segmentChanged(t))}),e.j41(1,"ion-segment-button",14)(2,"ion-label"),e.EFF(3,"CURRENT"),e.k0s()(),e.j41(4,"ion-segment-button",15)(5,"ion-label"),e.EFF(6,"COMPLETED"),e.k0s()()()}}let Te=(()=>{var n;class l{constructor(i,t){this.jobService=i,this.router=t,this.isAlertOpen=!1,this.selectedSegment="CURRENT",this.alertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.isAlertOpen=!1}},{text:"OK",role:"confirm",handler:()=>{this.tpl2Back()}}],this.jobService.navNumber=0}ngOnInit(){}backClick(){0!=this.jobService.newLampItems.length?this.isAlertOpen=!0:(this.jobService.navNumber<=0&&(this.jobService.navNumber=0,this.router.navigate(["mainPage"])),this.jobService.moveBackward())}segmentChanged(i){this.selectedSegment=i.detail.value,console.log("Segment changed to: ",this.selectedSegment)}tpl2Back(){this.isAlertOpen=!1,this.jobService.navNumber<=0&&(this.jobService.navNumber=0,this.router.navigate(["mainPage"])),this.jobService.moveBackward()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(F.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobs"]],decls:13,vars:5,consts:[["slot","start"],["name","arrow-back","size","large",3,"click"],[4,"ngIf"],["style","position: fixed;bottom: 0px; background-color: white;padding:0px;","value","CURRENT",3,"ionChange",4,"ngIf"],["header","TPL2 have been added.","message","All TPL2 will be removed from list?",3,"isOpen","buttons"],["style","width: 100%; vertical-align: middle;height: 100%;margin-top: 20px;",4,"ngIf"],["style","padding: 20px;",4,"ngIf"],[2,"width","100%","vertical-align","middle","height","100%","margin-top","20px"],[3,"isVisible",4,"ngIf"],[3,"isVisible"],[2,"padding","20px"],[3,"currentJob","isVisible",4,"ngIf"],[3,"currentJob","isVisible"],["value","CURRENT",2,"position","fixed","bottom","0px","background-color","white","padding","0px",3,"ionChange"],["value","CURRENT"],["value","COMPLETED"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-icon",1),e.bIt("click",function(){return t.backClick()}),e.k0s()(),e.j41(4,"ion-title"),e.EFF(5,"Jobs"),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,Se,3,2,"div",2)(8,Re,2,1,"div",2),e.k0s(),e.DNE(9,Le,7,0,"ion-segment",3),e.j41(10,"div"),e.EFF(11," V4 "),e.k0s(),e.nrm(12,"ion-alert",4)),2&i&&(e.R7$(7),e.Y8G("ngIf","CURRENT"==t.selectedSegment),e.R7$(),e.Y8G("ngIf","COMPLETED"==t.selectedSegment),e.R7$(),e.Y8G("ngIf",0==t.jobService.navNumber),e.R7$(3),e.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons))},dependencies:[b.bT,a.Zy,a.QW,a.b_,a.I9,a.hU,a.W9,a.lO,a.eU,a.iq,a.he,a.ln,a.Gp,a.eP,a.BC,a.ai,a.Je,q,ue,ve]}),l})();const Je=["square"];function Ne(n,l){if(1&n){const o=e.RV6();e.j41(0,"ion-fab",7)(1,"ion-fab-button",2),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.toggleTorch())}),e.nrm(2,"ion-icon",9),e.k0s()()}}let Ee=(()=>{var n;class l{constructor(i,t){this.dialogService=i,this.ngZone=t,this.formats=[],this.lensFacing=h.Nn.Back,this.isTorchAvailable=!1,this.barcodes=[]}ngOnInit(){this.barcodes=[],h.vi.isTorchAvailable().then(i=>{this.isTorchAvailable=i.available})}ngAfterViewInit(){setTimeout(()=>{this.startScan()},500)}ngOnDestroy(){this.stopScan()}setZoomRatio(i){i.detail.value&&h.vi.setZoomRatio({zoomRatio:parseInt(i.detail.value,10)})}closeModal(i){var t=this;return(0,u.A)(function*(){t.dialogService.dismissModal({barcode:i,barcodes:t.barcodes})})()}toggleTorch(){return(0,u.A)(function*(){yield h.vi.toggleTorch()})()}startScan(){var i=this;return(0,u.A)(function*(){var t,r;null===(t=document.querySelector("body"))||void 0===t||t.classList.add("barcode-scanning-active");const s={formats:i.formats,lensFacing:i.lensFacing},c=null===(r=i.squareElement)||void 0===r?void 0:r.nativeElement.getBoundingClientRect(),m=c?{left:c.left*window.devicePixelRatio,right:c.right*window.devicePixelRatio,top:c.top*window.devicePixelRatio,bottom:c.bottom*window.devicePixelRatio,width:c.width*window.devicePixelRatio,height:c.height*window.devicePixelRatio}:void 0,C=m?[[m.left,m.top],[m.left+m.width,m.top],[m.left+m.width,m.top+m.height],[m.left,m.top+m.height]]:void 0;yield h.vi.addListener("barcodeScanned",function(){var k=(0,u.A)(function*(I){i.ngZone.run(()=>{var L,T;const _=I.barcode.cornerPoints;C&&_&&(C[0][0]>_[0][0]||C[0][1]>_[0][1]||C[1][0]<_[1][0]||C[1][1]>_[1][1]||C[2][0]<_[2][0]||C[2][1]<_[2][1]||C[3][0]>_[3][0]||C[3][1]<_[3][1])||(i.barcode=I.barcode,null!==(L=i.barcodes)&&void 0!==L&&L.find(D=>D.displayValue==I.barcode.displayValue)||null===(T=i.barcodes)||void 0===T||T.push(I.barcode),i.closeModal(I.barcode))})});return function(I){return k.apply(this,arguments)}}()),yield h.vi.startScan(s),h.vi.getMinZoomRatio().then(k=>{i.minZoomRatio=k.zoomRatio}),h.vi.getMaxZoomRatio().then(k=>{i.maxZoomRatio=k.zoomRatio})})()}stopScan(){return(0,u.A)(function*(){var i;null===(i=document.querySelector("body"))||void 0===i||i.classList.remove("barcode-scanning-active"),yield h.vi.stopScan()})()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(G.o),e.rXU(e.SKi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-itemModelSingle"]],viewQuery:function(i,t){if(1&i&&e.GBs(Je,5),2&i){let r;e.mGM(r=e.lsd())&&(t.squareElement=r.first)}},inputs:{formats:"formats",lensFacing:"lensFacing"},decls:17,vars:5,consts:[["square",""],["slot","end",2,"background-color","white"],[3,"click"],["name","close"],[1,"square"],[1,"zoom-ratio-wrapper"],[3,"ionChange","min","max","disabled"],["slot","fixed","horizontal","end","vertical","bottom"],[2,"font-size","35px","color","rgb(25, 0, 218)","background-color","white","padding","5px"],["name","flashlight"]],template:function(i,t){if(1&i){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Scanning"),e.k0s(),e.j41(4,"ion-buttons",1)(5,"ion-button",2),e.bIt("click",function(){return e.eBV(r),e.Njj(t.closeModal())}),e.nrm(6,"ion-icon",3),e.k0s()()()(),e.nrm(7,"div",4,0),e.j41(9,"div",5)(10,"ion-range",6),e.bIt("ionChange",function(c){return e.eBV(r),e.Njj(t.setZoomRatio(c))}),e.k0s()(),e.DNE(11,Ne,3,0,"ion-fab",7),e.j41(12,"div",8)(13,"span"),e.EFF(14," Barcode:"),e.k0s(),e.j41(15,"span"),e.EFF(16),e.k0s()()}2&i&&(e.R7$(10),e.Y8G("min",t.minZoomRatio)("max",t.maxZoomRatio)("disabled",void 0===t.minZoomRatio||void 0===t.maxZoomRatio),e.R7$(),e.vxM(11,t.isTorchAvailable?11:-1),e.R7$(5),e.SpI(" ",null==t.barcode?null:t.barcode.displayValue,""))},dependencies:[a.Jm,a.QW,a.Q8,a.YW,a.eU,a.iq,a.Ob,a.BC,a.ai,a.su],styles:["ion-content[_ngcontent-%COMP%]{--background: transparent}.square[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border-radius:16px;width:200px;height:200px;border:6px solid white;box-shadow:0 0 0 4000px #0000004d}.zoom-ratio-wrapper[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:16px;transform:translate(-50%);width:50%}"]}),l})();const xe=n=>({"green-background":n});function Ge(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"div",7),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG();return e.Njj(r.lampClick(t))}),e.j41(2,"ion-grid",8)(3,"ion-row")(4,"ion-col",9)(5,"strong"),e.EFF(6,"Serial Number: "),e.k0s(),e.EFF(7),e.k0s(),e.j41(8,"ion-col",9)(9,"strong"),e.EFF(10,"HeadPiece Number: "),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"ion-col",9)(13,"strong"),e.EFF(14," Technician: "),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"ion-col",10)(17,"ion-grid",8),e.nrm(18,"ion-row"),e.k0s()()()()()()}if(2&n){let o;const i=l.$implicit,t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(4,xe,(null==i?null:i.jobLampStatus)==t.JobLampStatus.repeaired)),e.R7$(6),e.SpI(" ",null==i?null:i.serialNumber," "),e.R7$(4),e.SpI(" ",null==i?null:i.headPieceNumber," "),e.R7$(4),e.SpI(" ",t.getTech(null!==(o=null==i?null:i.technicianID)&&void 0!==o?o:"")," ")}}let De=(()=>{var n;class l{constructor(i,t,r,s,c){this.jobService=i,this.toastController=t,this.techservice=r,this.router=s,this.dialogService=c,this.job=new J,this.searchTerm="",this.filteredLamps=this.job.jobLamps,this.JobLampStatus=j,this.barcodeFormat=h.Gi,this.lensFacing=h.Nn,this.barcodes=[],this.isAlertOpen=!1,this.alertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.setOpen(!1)}},{text:"OK",role:"confirm",handler:()=>{this.clickComplete()}}]}ngOnInit(){var i;this.jobService.jobSelected&&(this.job=this.jobService.jobSelected),this.filteredLamps=null===(i=this.job.jobLamps)||void 0===i?void 0:i.sort((t,r)=>t.jobLampStatus===j.reparing&&r.jobLampStatus!==j.reparing?-1:t.jobLampStatus!==j.reparing&&r.jobLampStatus===j.reparing?1:0)}getTech(i){var t;return null===(t=this.techservice.technicians.find(r=>r.technicianID==i))||void 0===t?void 0:t.name}filterLamps(){const i=this.searchTerm.toLowerCase();this.job.jobLamps&&(this.filteredLamps=this.job.jobLamps.filter(t=>null!=t.serialNumber&&(null==t?void 0:t.serialNumber.toLowerCase().includes(i))))}onScanClick(){var i=this;return(0,u.A)(function*(){yield i.startScan()})()}lampClick(i){this.jobService.selectedJobLamp=i,this.jobService.moveForward()}startScan(){var i=this;return(0,u.A)(function*(){(yield i.dialogService.showModal({component:Ee,cssClass:"barcode-scanning-modal",showBackdrop:!1,componentProps:{formats:[i.barcodeFormat.Code128],lensFacing:h.Nn.Back}})).onDidDismiss().then(r=>{var s,c;const m=null===(s=r.data)||void 0===s?void 0:s.barcode;i.barcodes=null===(c=r.data)||void 0===c?void 0:c.barcodes,m&&(i.barcodes=[m],console.log(m)),i.searchTerm=i.barcodes[0].displayValue})})()}clickComplete(){this.jobService.updateJobStatus(this.job,R.Repaired).subscribe(i=>{this.job=i,this.jobService.jobSelected=i},i=>{})}getActive(){var i;return-1==(null===(i=this.job.jobLamps)||void 0===i?void 0:i.findIndex(r=>r.jobLampStatus==j.reparing))&&this.job.jobStatus!=R.Repairing}setOpen(i){this.isAlertOpen=i}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(a.K_),e.rXU(E.O),e.rXU(F.Ix),e.rXU(G.o))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobRepair"]],decls:18,vars:6,consts:[["size","6"],["shape","round",3,"click"],["expand","block",3,"click","disabled"],["fill","solid","type","text","size","large",2,"font-size","30px !important","margin-bottom","10px",3,"ngModelChange","ionInput","ngModel"],[2,"font-size","24px"],[4,"ngFor","ngForOf"],["header","Complete Repair Job?","message","Are you sure that you want to complete Job ?",3,"didDismiss","isOpen","buttons"],[1,"itemContainer",3,"click","ngClass"],[2,"padding","0px !important"],["size","10",2,"font-size","18px","text-align","left"],["size","2",2,"font-size","18px","text-align","right"]],template:function(i,t){1&i&&(e.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",0)(3,"ion-button",1),e.bIt("click",function(){return t.onScanClick()}),e.EFF(4," SCAN "),e.k0s()(),e.j41(5,"ion-col",0)(6,"ion-button",2),e.bIt("click",function(){return t.setOpen(!0)}),e.EFF(7," COMPLETE JOB"),e.k0s()()()(),e.j41(8,"h2"),e.EFF(9," Search: "),e.k0s(),e.j41(10,"ion-input",3),e.mxI("ngModelChange",function(s){return e.DH7(t.searchTerm,s)||(t.searchTerm=s),s}),e.bIt("ionInput",function(){return t.filterLamps()}),e.k0s(),e.j41(11,"div",4)(12,"strong"),e.EFF(13,"COUNT:"),e.k0s(),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.DNE(16,Ge,19,6,"div",5),e.j41(17,"ion-alert",6),e.bIt("didDismiss",function(){return t.setOpen(!1)}),e.k0s()),2&i&&(e.R7$(6),e.Y8G("disabled",t.getActive()),e.R7$(4),e.R50("ngModel",t.searchTerm),e.R7$(4),e.SpI(" ",null==t.filteredLamps?null:t.filteredLamps.length,""),e.R7$(2),e.Y8G("ngForOf",t.filteredLamps),e.R7$(),e.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons))},dependencies:[b.YU,b.Sq,p.BC,p.vS,a.Zy,a.Jm,a.hU,a.lO,a.$w,a.ln,a.Gw],styles:[".itemContainer[_ngcontent-%COMP%]{margin-bottom:8px;padding:5px;background-color:#add8e6;color:#000;border:1px;border-radius:10px;border-color:#00f;border-style:solid}ion-col[_ngcontent-%COMP%]{padding:0}ion-row[_ngcontent-%COMP%]{padding:0!important}.green-background[_ngcontent-%COMP%]{background-color:green}"]}),l})();class we{constructor(){this.rSelected=!1,this.jobLamp=null,this.item=null,this.itemStatus=null,this.qauntity=null,this.rSelected=!1}}var Oe=d(1129);const P=n=>({"background-color":n});function ye(n,l){if(1&n){const o=e.RV6();e.j41(0,"ion-button",11),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.clickComplete())}),e.EFF(1," COMPLETE "),e.k0s()}}function Me(n,l){1&n&&(e.j41(0,"ion-button",12),e.EFF(1," COMPLETED "),e.k0s()),2&n&&e.Y8G("disabled",!0)}function Pe(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"ion-button",22),e.bIt("click",function(){const t=e.eBV(o).index,r=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.valueClick(t,r))}),e.EFF(2),e.k0s()()}if(2&n){const o=l.index,i=e.XpG().$implicit,t=e.XpG(2);e.R7$(),e.Y8G("color",t.getColour(o,i)),e.R7$(),e.SpI(" ",o,"")}}function $e(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"div",17)(2,"ion-grid",18)(3,"ion-row")(4,"ion-col",19),e.EFF(5),e.k0s()(),e.j41(6,"ion-row")(7,"ion-col",19)(8,"div",20),e.DNE(9,Pe,3,2,"div",16),e.j41(10,"ion-button",21),e.bIt("click",function(){const t=e.eBV(o).$implicit,r=e.XpG(2);return e.Njj(r.getRClick(t))}),e.EFF(11," R "),e.k0s()()()()()()()}if(2&n){const o=l.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngStyle",e.eq3(5,P,o.colour)),e.R7$(4),e.Lme(" ",o.name," -- P-CODE: ",o.p_Code," "),e.R7$(4),e.Y8G("ngForOf",i.createRange(o.max+1)),e.R7$(),e.Y8G("color",i.getRSelected(o))}}function Be(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"h2"),e.EFF(2," Search: "),e.k0s(),e.j41(3,"div",13)(4,"ion-input",14),e.mxI("ngModelChange",function(t){e.eBV(o);const r=e.XpG();return e.DH7(r.searchTerm,t)||(r.searchTerm=t),e.Njj(t)}),e.bIt("ionInput",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.filterItems())}),e.k0s(),e.j41(5,"ion-icon",15),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.clearSearch())}),e.k0s()(),e.DNE(6,$e,12,7,"div",16),e.k0s()}if(2&n){const o=e.XpG();e.R7$(4),e.R50("ngModel",o.searchTerm),e.R7$(2),e.Y8G("ngForOf",o.filteredItems)}}function Xe(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"ion-button",22),e.bIt("click",function(){const t=e.eBV(o).index,r=e.XpG(2).$implicit,s=e.XpG(2);return e.Njj(s.valueClick(t,r))}),e.EFF(2),e.k0s()()}if(2&n){const o=l.index,i=e.XpG(2).$implicit,t=e.XpG(2);e.R7$(),e.Y8G("color",t.getColour(o,i)),e.R7$(),e.SpI(" ",o,"")}}function Ye(n,l){if(1&n&&(e.j41(0,"div",17)(1,"ion-grid",18)(2,"ion-row")(3,"ion-col",19),e.EFF(4),e.k0s()(),e.j41(5,"ion-row")(6,"ion-col",19)(7,"div",20),e.DNE(8,Xe,3,2,"div",16),e.k0s()()()()()),2&n){const o=e.XpG().$implicit,i=e.XpG(2);e.Y8G("ngStyle",e.eq3(4,P,o.colour)),e.R7$(4),e.Lme(" ",o.name," -- P-CODE: ",o.p_Code," "),e.R7$(4),e.Y8G("ngForOf",i.createRange(o.max+1))}}function Ae(n,l){if(1&n&&(e.j41(0,"div"),e.DNE(1,Ye,9,6,"div",23),e.k0s()),2&n){const o=l.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.getActiveItem(o))}}function Ve(n,l){if(1&n&&(e.j41(0,"div"),e.DNE(1,Ae,2,1,"div",16),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.filteredItems)}}let Ue=(()=>{var n;class l{constructor(i,t){this.jobService=i,this.itemService=t,this.jobLamp=new N,this.selectedSegment="all",this.searchTerm="",this.filteredItems=[],this.filteredItemss=[],this.JobLampStatus=j}ngOnInit(){this.jobLamp=this.jobService.selectedJobLamp,this.itemService.getItems().subscribe(i=>{this.filteredItems=i,this.filterItems()},i=>{}),console.log(this.jobService.selectedJobLamp)}filterItems(){const i=this.searchTerm.toLowerCase();this.itemService.items&&(this.filteredItems=this.itemService.items.filter(t=>{var r;return null!=t.name&&(null==t?void 0:t.name.toLowerCase().includes(i))||(null===(r=t.p_Code)||void 0===r?void 0:r.toLowerCase().includes(i))}),this.filteredItems.sort((t,r)=>{const s=t.colour?t.colour.toLowerCase():"",c=r.colour?r.colour.toLowerCase():"";return"#ffffff"===s?1:"#ffffff"===c?-1:0}))}clickComplete(){this.validateJobLamp()&&this.jobService.updateJobLamp(this.jobLamp,j.repeaired).subscribe(i=>{this.jobLamp.jobLampStatus=j.repeaired},i=>{})}validateJobLamp(){var i,t;let r=[];return(!this.jobLamp.serialNumber||""===this.jobLamp.serialNumber.trim())&&r.push("Serial Number"),(!this.jobLamp.headPieceNumber||""===this.jobLamp.headPieceNumber.trim())&&r.push("Head Piece Number"),(!(null!==(i=this.jobService.jobSelected)&&void 0!==i&&i.technicianID)||""===(null===(t=this.jobService.jobSelected)||void 0===t?void 0:t.technicianID.trim()))&&r.push("Technician ID"),r.length>0?(alert(`The following fields are missing or empty: ${r.join(", ")}`),!0):this.jobLamp}clearSearch(){this.searchTerm="",this.filterItems()}segmentChanged(i){this.selectedSegment=i.detail.value,console.log("Segment changed to: ",this.selectedSegment)}getActiveItem(i){var t;return null!=(null===(t=this.jobService.selectedJobLamp.jobItems)||void 0===t?void 0:t.find(s=>s.itemID==i.itemID))}createRange(i){return i>10&&(i=5),new Array(i)}valueClick(i,t){var r,s=null===(r=this.jobService.selectedJobLamp.jobItems)||void 0===r?void 0:r.find(m=>m.itemID==t.itemID);if(console.log(s),null==s){var c;let m=new we;m.itemID=t.itemID,m.jobLampID=this.jobService.selectedJobLamp.itemLampID,m.qauntity=i,null==this.jobService.selectedJobLamp.jobItems&&(this.jobService.selectedJobLamp.jobItems=[]),null===(c=this.jobService.selectedJobLamp.jobItems)||void 0===c||c.push(m),console.log(this.jobService.selectedJobLamp.jobItems)}else s.qauntity=i;this.saveClick()}getColour(i,t){var r,s=null===(r=this.jobService.selectedJobLamp.jobItems)||void 0===r?void 0:r.find(c=>c.itemID==t.itemID);return null==s?"medium":s.qauntity==i?"primary":"medium"}getRSelected(i){var t,r=null===(t=this.jobService.selectedJobLamp.jobItems)||void 0===t?void 0:t.find(s=>s.itemID==i.itemID);return null!=r&&r.rSelected?"primary":"medium"}getRClick(i){var t,r=null===(t=this.jobService.selectedJobLamp.jobItems)||void 0===t?void 0:t.find(s=>s.itemID==i.itemID);r&&(r.rSelected=!r.rSelected,this.saveClick())}saveClick(){this.jobService.updateJobLampStatus(this.jobService.selectedJobLamp).subscribe(i=>{this.jobLamp.jobLampStatus=j.reparing,console.log(i)},i=>{})}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(Oe.b))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobRepairItems"]],decls:23,vars:5,consts:[["size","6"],[1,"flex-container"],["expand","block",3,"click",4,"ngIf"],["expand","block",3,"disabled",4,"ngIf"],[2,"padding-bottom","120px","padding-left","0px !important","padding-right","0px !important"],[4,"ngIf"],["value","all",2,"position","fixed","bottom","0px","background-color","white","padding","0px",3,"ionChange"],["value","all"],["name","list"],["value","repaired"],["name","hammer"],["expand","block",3,"click"],["expand","block",3,"disabled"],[1,"input-container"],["fill","solid","type","text",2,"font-size","30px !important","margin-bottom","10px",3,"ngModelChange","ionInput","ngModel"],["name","close-circle",1,"clear-icon",3,"click"],[4,"ngFor","ngForOf"],[1,"itemContainer",3,"ngStyle"],[2,"padding","0px !important"],["size","12",2,"font-size","18px","text-align","left"],[1,"button-container"],[2,"margin-left","20px",3,"click","color"],[3,"click","color"],["class","itemContainer",3,"ngStyle",4,"ngIf"]],template:function(i,t){1&i&&(e.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",0)(3,"div",1),e.EFF(4," Serial Number: "),e.j41(5,"div")(6,"h2"),e.EFF(7),e.k0s()()()(),e.j41(8,"ion-col",0),e.DNE(9,ye,2,0,"ion-button",2)(10,Me,2,1,"ion-button",3),e.k0s()()(),e.j41(11,"ion-card-content",4),e.DNE(12,Be,7,2,"div",5)(13,Ve,2,1,"div",5),e.k0s(),e.j41(14,"ion-segment",6),e.bIt("ionChange",function(s){return t.segmentChanged(s)}),e.j41(15,"ion-segment-button",7),e.nrm(16,"ion-icon",8),e.j41(17,"ion-label"),e.EFF(18,"ALL"),e.k0s()(),e.j41(19,"ion-segment-button",9),e.nrm(20,"ion-icon",10),e.j41(21,"ion-label"),e.EFF(22,"REPAIRED ITEMS"),e.k0s()()()),2&i&&(e.R7$(7),e.SpI(" ",t.jobLamp.serialNumber,""),e.R7$(2),e.Y8G("ngIf",t.jobLamp.jobLampStatus==t.JobLampStatus.reparing),e.R7$(),e.Y8G("ngIf",t.jobLamp.jobLampStatus==t.JobLampStatus.repeaired),e.R7$(2),e.Y8G("ngIf","all"===t.selectedSegment),e.R7$(),e.Y8G("ngIf","repaired"===t.selectedSegment))},dependencies:[b.Sq,b.bT,b.B3,p.BC,p.vS,a.Jm,a.I9,a.hU,a.lO,a.iq,a.$w,a.he,a.ln,a.Gp,a.eP,a.Je,a.Gw],styles:[".itemContainer[_ngcontent-%COMP%]{margin-bottom:8px;padding:5px;background-color:#add8e6;color:#000;border:1px;border-radius:10px;border-color:#00f;border-style:solid}ion-col[_ngcontent-%COMP%]{padding:0}ion-row[_ngcontent-%COMP%]{padding:0!important}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.button-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 1 auto}.input-container[_ngcontent-%COMP%]{position:relative}.clear-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:24px;cursor:pointer;color:#666;z-index:999999}"]}),l})();function ze(n,l){if(1&n){const o=e.RV6();e.j41(0,"ion-grid",10)(1,"ion-row")(2,"ion-col",11)(3,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.onRepairClick())}),e.EFF(4," Repairing "),e.k0s()(),e.j41(5,"ion-col",12)(6,"ion-button",13),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.onClick(t.jobStatuses.Repairing))}),e.EFF(7," Re-Repair "),e.k0s()()()()}if(2&n){const o=e.XpG(3);e.R7$(3),e.Y8G("disabled",o.getDisabled(o.jobStatuses.Repairing))}}function qe(n,l){if(1&n){const o=e.RV6();e.j41(0,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.onRepairClick())}),e.EFF(1," Repairing "),e.k0s()}if(2&n){const o=e.XpG(3);e.Y8G("disabled",o.getDisabled(o.jobStatuses.Repairing))}}function He(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"div",6),e.DNE(2,ze,8,1,"ion-grid",7)(3,qe,2,1,"ion-button",8),e.j41(4,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.Programmed))}),e.EFF(5," Programming "),e.k0s(),e.j41(6,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.Labeled))}),e.EFF(7," Calibration "),e.k0s(),e.j41(8,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.FieldTested))}),e.EFF(9," Field testing /COS testing "),e.k0s(),e.j41(10,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.EngraveLamps))}),e.EFF(11," Cable Measurement / LUX Test "),e.k0s(),e.j41(12,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.CableMeasurement_Lux_Done))}),e.EFF(13," QC "),e.k0s(),e.j41(14,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.SendQuoting))}),e.EFF(15," Send Quote "),e.k0s()()()}if(2&n){const o=e.XpG(2);e.R7$(2),e.Y8G("ngIf",o.job.jobStatus!=o.jobStatuses.Repairing&&o.job.jobStatus!=o.jobStatuses.Created),e.R7$(),e.Y8G("ngIf",o.job.jobStatus==o.jobStatuses.Repairing),e.R7$(),e.Y8G("disabled",o.getDisabled(o.jobStatuses.Repaired)),e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.Programmed)),e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.FieldTested)),e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.CableMeasurement_Lux)),e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.EngraveLamps)),e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.CableMeasurement_Lux_Done))}}function We(n,l){1&n&&(e.j41(0,"div"),e.nrm(1,"app-jobRepair"),e.k0s())}function Qe(n,l){1&n&&(e.j41(0,"div"),e.nrm(1,"app-jobRepairItems"),e.k0s())}function Ze(n,l){if(1&n&&(e.j41(0,"div"),e.DNE(1,He,16,8,"div",4)(2,We,2,0,"div",4)(3,Qe,2,0,"div",4),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngIf",0==o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",1==o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",2==o.jobService.navNumber)}}function Ke(n,l){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"div",6)(2,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.SendQuoting))}),e.EFF(3," Send Quote "),e.k0s(),e.j41(4,"ion-button",9),e.bIt("click",function(){e.eBV(o);const t=e.XpG(2);return e.Njj(t.onClick(t.jobStatuses.Repairing))}),e.EFF(5," SUBMIT BACK "),e.k0s()()()}if(2&n){const o=e.XpG(2);e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.SendQuoting)),e.R7$(2),e.Y8G("disabled",o.getDisabled(o.jobStatuses.SendQuoting))}}function et(n,l){1&n&&(e.j41(0,"div"),e.nrm(1,"app-jobRepair"),e.k0s())}function tt(n,l){1&n&&(e.j41(0,"div"),e.nrm(1,"app-jobRepairItems"),e.k0s())}function it(n,l){if(1&n&&(e.j41(0,"div"),e.DNE(1,Ke,6,2,"div",4)(2,et,2,0,"div",4)(3,tt,2,0,"div",4),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngIf",0==o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",1==o.jobService.navNumber),e.R7$(),e.Y8G("ngIf",2==o.jobService.navNumber)}}const nt=[{path:"",component:Te},{path:"jobProgress",component:(()=>{var n;class l{constructor(i,t,r,s){this.jobService=i,this.toastController=t,this.router=r,this.cdr=s,this.job=new J,this.jobStatuses=R,this.jobStatusUpdate=R.None,this.header="Complete task ?",this.message="Are you sure you want to ?",this.isAlertOpen=!1,this.alertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.jobService.newLampItems=[],this.isAlertOpen=!1}},{text:"OK",role:"confirm",handler:()=>{this.performUpdate(),this.isAlertOpen=!1}}]}ngOnInit(){var i,t;this.jobService.getJobByID(null!==(i=null===(t=this.jobService.jobSelected)||void 0===t?void 0:t.jobID)&&void 0!==i?i:"").subscribe(r=>{this.job=r,this.job.jobStatus==R.Created&&(this.job.jobStatus=R.Repairing)},r=>{})}onClick(i){this.jobStatusUpdate=i,this.isAlertOpen=!0,this.cdr.detectChanges()}getDisabled(i){var t;return this.job=null!==(t=this.jobService.jobSelected)&&void 0!==t?t:new J,this.job.jobStatus!=i}performUpdate(){this.jobService.updateJobStatus(this.job,this.jobStatusUpdate).subscribe(i=>{Object.assign(this.job,i),this.presentToast("Job status has been updated.","success"),this.cdr.detectChanges()},i=>{this.presentToast("There has been a error.","error")})}backClick(){0==this.jobService.navNumber?this.router.navigate(["/jobsPage"]):this.jobService.moveBackward()}onRepairClick(){this.jobService.moveForward(),this.cdr.detectChanges()}presentToast(i,t){var r=this;return(0,u.A)(function*(){yield(yield r.toastController.create({message:i,duration:1500,position:"bottom",cssClass:t})).present()})()}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(S),e.rXU(a.K_),e.rXU(F.Ix),e.rXU(e.gRc))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-jobProgress"]],decls:19,vars:8,consts:[["slot","start"],["name","arrow-back","size","large",3,"click"],[1,"ion-padding"],["size","6",1,"flex-container"],[4,"ngIf"],[3,"isOpen","header","message","buttons"],[2,"width","100%","vertical-align","middle","height","100%","margin-top","20px"],["class","progButtons",4,"ngIf"],["class","progButtons","expand","block",3,"disabled","click",4,"ngIf"],["expand","block",1,"progButtons",3,"click","disabled"],[1,"progButtons"],["size","8"],["size","4"],["expand","block",1,"progButtons",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-icon",1),e.bIt("click",function(){return t.backClick()}),e.k0s()(),e.j41(4,"ion-title"),e.EFF(5,"Job Progress"),e.k0s()()(),e.j41(6,"ion-content",2)(7,"ion-col",3),e.EFF(8," RS Number: "),e.j41(9,"h2"),e.EFF(10),e.k0s()(),e.j41(11,"ion-col",3),e.EFF(12," RFQ: "),e.j41(13,"h2"),e.EFF(14),e.k0s()(),e.nrm(15,"hr"),e.DNE(16,Ze,4,3,"div",4)(17,it,4,3,"div",4),e.k0s(),e.nrm(18,"ion-alert",5)),2&i&&(e.R7$(10),e.JRh(t.job.rsNumber),e.R7$(4),e.JRh(t.job.rfq),e.R7$(2),e.Y8G("ngIf",t.job.jobStatus!=t.jobStatuses.SendQuoting),e.R7$(),e.Y8G("ngIf",t.job.jobStatus==t.jobStatuses.SendQuoting),e.R7$(),e.Y8G("isOpen",t.isAlertOpen)("header",t.header)("message",t.message)("buttons",t.alertButtons))},dependencies:[b.bT,a.Zy,a.Jm,a.QW,a.hU,a.W9,a.lO,a.eU,a.iq,a.ln,a.BC,a.ai,De,Ue]}),l})()}];let ot=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[F.iI.forChild(nt),F.iI]}),l})(),rt=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[b.MD,ot,p.YN,a.bv,p.X1]}),l})()}}]);